{"ast":null,"code":"import _objectSpread from\"/Volumes/Workflow/Git Projects /Datence-Assignment/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import BookGrid from'./components/BookGrid';import Filters from'./components/Filters';import BookDetails from'./components/BookDetails';import{Container,Typography,Box,TextField,Button,CircularProgress,Alert}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[books,setBooks]=useState([]);const[selectedBook,setSelectedBook]=useState(null);const[filters,setFilters]=useState({search:'',rating:'',inStock:'',minPrice:'',maxPrice:''});const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[scrapeUrl,setScrapeUrl]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');useEffect(()=>{const fetchBooks=async()=>{setLoading(true);setError('');try{const params=_objectSpread(_objectSpread({},filters),{},{page});const res=await axios.get('/api/books',{params});setBooks(res.data.books);setTotalPages(res.data.pages);}catch(err){setError('Failed to fetch books');}setLoading(false);};fetchBooks();},[filters,page]);const handleScrape=async e=>{e.preventDefault();setError('');setSuccess('');if(!scrapeUrl){setError('Please enter a URL');return;}setLoading(true);try{await axios.post('/api/refresh',{url:scrapeUrl});setSuccess('Scraping started! Refresh the book list after a while.');setScrapeUrl('');}catch(err){setError('Failed to start scraping');}setLoading(false);};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{py:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",align:\"center\",gutterBottom:true,color:\"primary\",children:\"Book Explorer\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center',mb:3},children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleScrape,style:{width:'100%',maxWidth:500,display:'flex',gap:8},children:[/*#__PURE__*/_jsx(TextField,{label:\"Book Site URL\",variant:\"outlined\",fullWidth:true,value:scrapeUrl,onChange:e=>setScrapeUrl(e.target.value),placeholder:\"https://books.toscrape.com/\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"secondary\",children:\"Scrape & Save\"})]}),loading&&/*#__PURE__*/_jsx(CircularProgress,{sx:{mt:2}}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mt:2},children:error}),success&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mt:2},children:success})]}),/*#__PURE__*/_jsx(Filters,{filters:filters,setFilters:setFilters,setPage:setPage}),/*#__PURE__*/_jsx(BookGrid,{books:books,setSelectedBook:setSelectedBook,page:page,setPage:setPage,totalPages:totalPages}),/*#__PURE__*/_jsx(BookDetails,{book:selectedBook,onClose:()=>setSelectedBook(null)})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","BookGrid","Filters","BookDetails","Container","Typography","Box","TextField","Button","CircularProgress","Alert","jsx","_jsx","jsxs","_jsxs","App","books","setBooks","selectedBook","setSelectedBook","filters","setFilters","search","rating","inStock","minPrice","maxPrice","page","setPage","totalPages","setTotalPages","scrapeUrl","setScrapeUrl","loading","setLoading","error","setError","success","setSuccess","fetchBooks","params","_objectSpread","res","get","data","pages","err","handleScrape","e","preventDefault","post","url","maxWidth","sx","py","children","variant","align","gutterBottom","color","display","flexDirection","alignItems","mb","onSubmit","style","width","gap","label","fullWidth","value","onChange","target","placeholder","type","mt","severity","book","onClose"],"sources":["/Volumes/Workflow/Git Projects /Datence-Assignment/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport BookGrid from './components/BookGrid';\nimport Filters from './components/Filters';\nimport BookDetails from './components/BookDetails';\nimport { Container, Typography, Box, TextField, Button, CircularProgress, Alert } from '@mui/material';\n\nfunction App() {\n  const [books, setBooks] = useState([]);\n  const [selectedBook, setSelectedBook] = useState(null);\n  const [filters, setFilters] = useState({ search: '', rating: '', inStock: '', minPrice: '', maxPrice: '' });\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [scrapeUrl, setScrapeUrl] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  useEffect(() => {\n    const fetchBooks = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const params = { ...filters, page };\n        const res = await axios.get('/api/books', { params });\n        setBooks(res.data.books);\n        setTotalPages(res.data.pages);\n      } catch (err) {\n        setError('Failed to fetch books');\n      }\n      setLoading(false);\n    };\n    fetchBooks();\n  }, [filters, page]);\n\n  const handleScrape = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    if (!scrapeUrl) {\n      setError('Please enter a URL');\n      return;\n    }\n    setLoading(true);\n    try {\n      await axios.post('/api/refresh', { url: scrapeUrl });\n      setSuccess('Scraping started! Refresh the book list after a while.');\n      setScrapeUrl('');\n    } catch (err) {\n      setError('Failed to start scraping');\n    }\n    setLoading(false);\n  };\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n      <Typography variant=\"h3\" align=\"center\" gutterBottom color=\"primary\">Book Explorer</Typography>\n      <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', mb: 3 }}>\n        <form onSubmit={handleScrape} style={{ width: '100%', maxWidth: 500, display: 'flex', gap: 8 }}>\n          <TextField\n            label=\"Book Site URL\"\n            variant=\"outlined\"\n            fullWidth\n            value={scrapeUrl}\n            onChange={e => setScrapeUrl(e.target.value)}\n            placeholder=\"https://books.toscrape.com/\"\n          />\n          <Button type=\"submit\" variant=\"contained\" color=\"secondary\">Scrape & Save</Button>\n        </form>\n        {loading && <CircularProgress sx={{ mt: 2 }} />}\n        {error && <Alert severity=\"error\" sx={{ mt: 2 }}>{error}</Alert>}\n        {success && <Alert severity=\"success\" sx={{ mt: 2 }}>{success}</Alert>}\n      </Box>\n      <Filters filters={filters} setFilters={setFilters} setPage={setPage} />\n      <BookGrid books={books} setSelectedBook={setSelectedBook} page={page} setPage={setPage} totalPages={totalPages} />\n      <BookDetails book={selectedBook} onClose={() => setSelectedBook(null)} />\n    </Container>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}